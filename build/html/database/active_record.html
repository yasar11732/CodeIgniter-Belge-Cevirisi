
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    
	    <title>Active Record Class &mdash; CodeIgniter v3.0-dev documentation</title>

	    <link rel="stylesheet" href="../_static/asset/css/common.css" type="text/css" />
	    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
	    <script type="text/javascript">
	      var DOCUMENTATION_OPTIONS = {
	        URL_ROOT:    '../',
	        VERSION:     '3.0-dev',
	        COLLAPSE_INDEX: false,
	        FILE_SUFFIX: '.html',
	        HAS_SOURCE:  true
	      };
	    </script>
	    <script type="text/javascript" src="../_static/jquery.js"></script>
	    <script type="text/javascript" src="../_static/underscore.js"></script>
	    <script type="text/javascript" src="../_static/doctools.js"></script>
	    <link rel="top" title="CodeIgniter v3.0-dev documentation" href="../index.html" />
	    <link rel="up" title="Veri Tabanı Sınıfı" href="index.html" />
	    <link rel="next" title="Transactions" href="transactions.html" />
	    <link rel="prev" title="Query Helper Functions" href="helpers.html" /> 
	</head>
	<body>
		<div id="table-contents">
			<div class="toctree-wrapper compound">
			<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Open Software License (&#8220;OSL&#8221;) v 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">CodeIgniter Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/requirements.html">Server Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">General Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Veri Tabanı Sınıfı</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.html">Hızlı Başlangıç: Kullanım Örnekleri</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Veri Tabanı Konfigürasyonu</a></li>
<li class="toctree-l2"><a class="reference internal" href="connecting.html">Veri Tabanına Bağlanmak</a></li>
<li class="toctree-l2"><a class="reference internal" href="queries.html">Sorgu Çalıştırmak</a></li>
<li class="toctree-l2"><a class="reference internal" href="results.html">Sorgu Sonuçları Üretmek</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Sorgu Yardımcı Fonksiyonları</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Aktif Kayıt Sınıfı</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">İşlemler</a></li>
<li class="toctree-l2"><a class="reference internal" href="table_data.html">Tablo Meta Verileri</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Alan Meta Verileri</a></li>
<li class="toctree-l2"><a class="reference internal" href="call_function.html">Özel Fonksiyon Çağrıları</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Sorgu Önbelleği</a></li>
<li class="toctree-l2"><a class="reference internal" href="forge.html">Veri Tabanı Forge Sınıfı İle Veri Tabanı Düzenleme İşlemleri</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Veri Tabanı Yardımcı Sınıfı</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">CodeIgniter Belgesi Yazma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/quick_reference.html">Quick Reference Chart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/credits.html">Credits</a></li>
</ul>

			</div>
		</div>

		<div id="brand" class="ci">
			<a href="http://codeigniter.com/"><img src="../_static/asset/img/ci-logo.gif" alt="CodeIgniter"></a>
			<p>3.0-dev User Guide</p>
		    <p><a href="../_sources/database/active_record.txt"
			           rel="nofollow">Show Source</a></p>
		</div><!-- /#brand -->

		<div id="header">
			<form method="get" action="http://www.google.com/search">
				<fieldset>
					<input type="text" name="q" id="q" value="">
					<input type="hidden" name="as_sitesearch" id="as_sitesearch" value="codeigniter.com/user_guide/" />
					<input class="grades" type="submit" value="search">
				</fieldset>
			</form>
			<ul>
				<li><a href="../index.html">Home</a>&nbsp;&nbsp; &rsaquo;</li>
				<li><a id="toc-link" href="../index.html">Table of Contents</a>&nbsp;&nbsp; &rsaquo;</li>
				<li><a href="index.html" accesskey="U">Veri Tabanı Sınıfı</a>&nbsp;&nbsp;  &rsaquo;</li>

				<li><strong>Active Record Class</strong></li>
			</ul>
		</div><!-- /#header -->

		<div class="section" id="content">
			<div class="section" id="active-record-class">
<h1><a class="toc-backref" href="#id1">Active Record Class</a><a class="headerlink" href="#active-record-class" title="Permalink to this headline">¶</a></h1>
<p>CodeIgniter uses a modified version of the Active Record Database
Pattern. This pattern allows information to be retrieved, inserted, and
updated in your database with minimal scripting. In some cases only one
or two lines of code are necessary to perform a database action.
CodeIgniter does not require that each database table be its own class
file. It instead provides a more simplified interface.</p>
<p>Beyond simplicity, a major benefit to using the Active Record features
is that it allows you to create database independent applications, since
the query syntax is generated by each database adapter. It also allows
for safer queries, since the values are escaped automatically by the
system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you intend to write your own queries you can disable this
class in your database config file, allowing the core database library
and adapter to utilize fewer resources.</p>
</div>
<div class="contents topic" id="page-contents">
<p class="topic-title first">Page Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#active-record-class" id="id1">Active Record Class</a><ul>
<li><a class="reference internal" href="#selecting-data" id="id2">Selecting Data</a><ul>
<li><a class="reference internal" href="#this-db-get" id="id3">$this-&gt;db-&gt;get()</a></li>
<li><a class="reference internal" href="#this-db-get-compiled-select" id="id4">$this-&gt;db-&gt;get_compiled_select()</a></li>
<li><a class="reference internal" href="#this-db-get-where" id="id5">$this-&gt;db-&gt;get_where()</a></li>
<li><a class="reference internal" href="#this-db-select" id="id6">$this-&gt;db-&gt;select()</a></li>
<li><a class="reference internal" href="#this-db-select-max" id="id7">$this-&gt;db-&gt;select_max()</a></li>
<li><a class="reference internal" href="#this-db-select-min" id="id8">$this-&gt;db-&gt;select_min()</a></li>
<li><a class="reference internal" href="#this-db-select-avg" id="id9">$this-&gt;db-&gt;select_avg()</a></li>
<li><a class="reference internal" href="#this-db-select-sum" id="id10">$this-&gt;db-&gt;select_sum()</a></li>
<li><a class="reference internal" href="#this-db-from" id="id11">$this-&gt;db-&gt;from()</a></li>
<li><a class="reference internal" href="#this-db-join" id="id12">$this-&gt;db-&gt;join()</a></li>
<li><a class="reference internal" href="#this-db-where" id="id13">$this-&gt;db-&gt;where()</a></li>
<li><a class="reference internal" href="#this-db-or-where" id="id14">$this-&gt;db-&gt;or_where()</a></li>
<li><a class="reference internal" href="#this-db-where-in" id="id15">$this-&gt;db-&gt;where_in()</a></li>
<li><a class="reference internal" href="#this-db-or-where-in" id="id16">$this-&gt;db-&gt;or_where_in()</a></li>
<li><a class="reference internal" href="#this-db-where-not-in" id="id17">$this-&gt;db-&gt;where_not_in()</a></li>
<li><a class="reference internal" href="#this-db-or-where-not-in" id="id18">$this-&gt;db-&gt;or_where_not_in()</a></li>
<li><a class="reference internal" href="#this-db-like" id="id19">$this-&gt;db-&gt;like()</a></li>
<li><a class="reference internal" href="#this-db-or-like" id="id20">$this-&gt;db-&gt;or_like()</a></li>
<li><a class="reference internal" href="#this-db-not-like" id="id21">$this-&gt;db-&gt;not_like()</a></li>
<li><a class="reference internal" href="#this-db-or-not-like" id="id22">$this-&gt;db-&gt;or_not_like()</a></li>
<li><a class="reference internal" href="#this-db-group-by" id="id23">$this-&gt;db-&gt;group_by()</a></li>
<li><a class="reference internal" href="#this-db-distinct" id="id24">$this-&gt;db-&gt;distinct()</a></li>
<li><a class="reference internal" href="#this-db-having" id="id25">$this-&gt;db-&gt;having()</a></li>
<li><a class="reference internal" href="#this-db-or-having" id="id26">$this-&gt;db-&gt;or_having()</a></li>
<li><a class="reference internal" href="#this-db-order-by" id="id27">$this-&gt;db-&gt;order_by()</a></li>
<li><a class="reference internal" href="#this-db-limit" id="id28">$this-&gt;db-&gt;limit()</a></li>
<li><a class="reference internal" href="#this-db-count-all-results" id="id29">$this-&gt;db-&gt;count_all_results()</a></li>
<li><a class="reference internal" href="#this-db-count-all" id="id30">$this-&gt;db-&gt;count_all()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inserting-data" id="id31">Inserting Data</a><ul>
<li><a class="reference internal" href="#this-db-insert" id="id32">$this-&gt;db-&gt;insert()</a></li>
<li><a class="reference internal" href="#this-db-get-compiled-insert" id="id33">$this-&gt;db-&gt;get_compiled_insert()</a></li>
<li><a class="reference internal" href="#this-db-insert-batch" id="id34">$this-&gt;db-&gt;insert_batch()</a></li>
<li><a class="reference internal" href="#this-db-set" id="id35">$this-&gt;db-&gt;set()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#updating-data" id="id36">Updating Data</a><ul>
<li><a class="reference internal" href="#this-db-update" id="id37">$this-&gt;db-&gt;update()</a></li>
<li><a class="reference internal" href="#this-db-update-batch" id="id38">$this-&gt;db-&gt;update_batch()</a></li>
<li><a class="reference internal" href="#this-db-get-compiled-update" id="id39">$this-&gt;db-&gt;get_compiled_update()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deleting-data" id="id40">Deleting Data</a><ul>
<li><a class="reference internal" href="#this-db-delete" id="id41">$this-&gt;db-&gt;delete()</a></li>
<li><a class="reference internal" href="#this-db-empty-table" id="id42">$this-&gt;db-&gt;empty_table()</a></li>
<li><a class="reference internal" href="#this-db-truncate" id="id43">$this-&gt;db-&gt;truncate()</a></li>
<li><a class="reference internal" href="#this-db-get-compiled-delete" id="id44">$this-&gt;db-&gt;get_compiled_delete()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#method-chaining" id="id45">Method Chaining</a></li>
<li><a class="reference internal" href="#active-record-caching" id="id46">Active Record Caching</a><ul>
<li><a class="reference internal" href="#this-db-start-cache" id="id47">$this-&gt;db-&gt;start_cache()</a></li>
<li><a class="reference internal" href="#this-db-stop-cache" id="id48">$this-&gt;db-&gt;stop_cache()</a></li>
<li><a class="reference internal" href="#this-db-flush-cache" id="id49">$this-&gt;db-&gt;flush_cache()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reset-active-record" id="id50">Reset Active Record</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="selecting-data">
<h2><a class="toc-backref" href="#id2">Selecting Data</a><a class="headerlink" href="#selecting-data" title="Permalink to this headline">¶</a></h2>
<p>The following functions allow you to build SQL <strong>SELECT</strong> statements.</p>
<div class="section" id="this-db-get">
<h3><a class="toc-backref" href="#id3">$this-&gt;db-&gt;get()</a><a class="headerlink" href="#this-db-get" title="Permalink to this headline">¶</a></h3>
<p>Runs the selection query and returns the result. Can be used by itself
to retrieve all records from a table:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>  <span class="c1">// Produces: SELECT * FROM mytable</span>
</pre></div>
</div>
<p>The second and third parameters enable you to set a limit and offset
clause:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
<span class="c1">// Produces: SELECT * FROM mytable LIMIT 20, 10 (in MySQL. Other databases have slightly different syntax)</span>
</pre></div>
</div>
<p>You&#8217;ll notice that the above function is assigned to a variable named
$query, which can be used to show the results:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">result</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span>
<span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Please visit the <a class="reference internal" href="results.html"><em>result functions</em></a> page for a full
discussion regarding result generation.</p>
</div>
<div class="section" id="this-db-get-compiled-select">
<h3><a class="toc-backref" href="#id4">$this-&gt;db-&gt;get_compiled_select()</a><a class="headerlink" href="#this-db-get-compiled-select" title="Permalink to this headline">¶</a></h3>
<p>Compiles the selection query just like <a class="reference internal" href="#this-db-get">$this-&gt;db-&gt;get()</a> but does not <em>run</em>
the query. This method simply returns the SQL query as a string.</p>
<p>Example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$sql</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get_compiled_select</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$sql</span><span class="p">;</span>

<span class="c1">// Produces string: SELECT * FROM mytable</span>
</pre></div>
</div>
<p>The second parameter enables you to set whether or not the active record query
will be reset (by default it will be&amp;mdash;just like <cite>$this-&gt;db-&gt;get()</cite>):</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get_compiled_select</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
<span class="c1">// Produces string: SELECT * FROM mytable LIMIT 20, 10</span>
<span class="c1">// (in MySQL. Other databases have slightly different syntax)</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;title, content, date&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get_compiled_select</span><span class="p">();</span>

<span class="c1">// Produces string: SELECT title, content, date FROM mytable</span>
</pre></div>
</div>
<p>The key thing to notice in the above example is that the second query did not
utilize <a class="reference internal" href="#this-db-from">$this-&gt;db-&gt;from()</a> and did not pass a table name into the first
parameter. The reason for this outcome is because the query has not been
executed using <a class="reference internal" href="#this-db-get">$this-&gt;db-&gt;get()</a> which resets values or reset directly
using <a href="#id51"><span class="problematic" id="id52">`$this-db-&gt;reset_query()`_</span></a>.</p>
</div>
<div class="section" id="this-db-get-where">
<h3><a class="toc-backref" href="#id5">$this-&gt;db-&gt;get_where()</a><a class="headerlink" href="#this-db-get-where" title="Permalink to this headline">¶</a></h3>
<p>Identical to the above function except that it permits you to add a
&#8220;where&#8221; clause in the second parameter, instead of using the db-&gt;where()
function:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get_where</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">),</span> <span class="nv">$limit</span><span class="p">,</span> <span class="nv">$offset</span><span class="p">);</span>
</pre></div>
</div>
<p>Please read the about the where function below for more information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">get_where() was formerly known as getwhere(), which has been</p>
</div>
<p>removed</p>
</div>
<div class="section" id="this-db-select">
<h3><a class="toc-backref" href="#id6">$this-&gt;db-&gt;select()</a><a class="headerlink" href="#this-db-select" title="Permalink to this headline">¶</a></h3>
<p>Permits you to write the SELECT portion of your query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;title, content, date&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>  <span class="c1">// Produces: SELECT title, content, date FROM mytable</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are selecting all (*) from a table you do not need to
use this function. When omitted, CodeIgniter assumes you wish to SELECT *</p>
</div>
<p>$this-&gt;db-&gt;select() accepts an optional second parameter. If you set it
to FALSE, CodeIgniter will not try to protect your field or table names
with backticks. This is useful if you need a compound select statement.</p>
<div class="highlight-ci"><pre>$this-&gt;db-&gt;select('(SELECT SUM(payments.amount) FROM payments WHERE payments.invoice_id=4') AS amount_paid', FALSE);
$query = $this-&gt;db-&gt;get('mytable');</pre>
</div>
</div>
<div class="section" id="this-db-select-max">
<h3><a class="toc-backref" href="#id7">$this-&gt;db-&gt;select_max()</a><a class="headerlink" href="#this-db-select-max" title="Permalink to this headline">¶</a></h3>
<p>Writes a &#8220;SELECT MAX(field)&#8221; portion for your query. You can optionally
include a second parameter to rename the resulting field.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select_max</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">);</span>  <span class="c1">// Produces: SELECT MAX(age) as age FROM members</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select_max</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;member_age&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">);</span> <span class="c1">// Produces: SELECT MAX(age) as member_age FROM members</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-select-min">
<h3><a class="toc-backref" href="#id8">$this-&gt;db-&gt;select_min()</a><a class="headerlink" href="#this-db-select-min" title="Permalink to this headline">¶</a></h3>
<p>Writes a &#8220;SELECT MIN(field)&#8221; portion for your query. As with
select_max(), You can optionally include a second parameter to rename
the resulting field.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select_min</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">);</span> <span class="c1">// Produces: SELECT MIN(age) as age FROM members</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-select-avg">
<h3><a class="toc-backref" href="#id9">$this-&gt;db-&gt;select_avg()</a><a class="headerlink" href="#this-db-select-avg" title="Permalink to this headline">¶</a></h3>
<p>Writes a &#8220;SELECT AVG(field)&#8221; portion for your query. As with
select_max(), You can optionally include a second parameter to rename
the resulting field.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select_avg</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">);</span> <span class="c1">// Produces: SELECT AVG(age) as age FROM members</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-select-sum">
<h3><a class="toc-backref" href="#id10">$this-&gt;db-&gt;select_sum()</a><a class="headerlink" href="#this-db-select-sum" title="Permalink to this headline">¶</a></h3>
<p>Writes a &#8220;SELECT SUM(field)&#8221; portion for your query. As with
select_max(), You can optionally include a second parameter to rename
the resulting field.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select_sum</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">);</span> <span class="c1">// Produces: SELECT SUM(age) as age FROM members</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-from">
<h3><a class="toc-backref" href="#id11">$this-&gt;db-&gt;from()</a><a class="headerlink" href="#this-db-from" title="Permalink to this headline">¶</a></h3>
<p>Permits you to write the FROM portion of your query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;title, content, date&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>  <span class="c1">// Produces: SELECT title, content, date FROM mytable</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As shown earlier, the FROM portion of your query can be specified
in the $this-&gt;db-&gt;get() function, so use whichever method you prefer.</p>
</div>
</div>
<div class="section" id="this-db-join">
<h3><a class="toc-backref" href="#id12">$this-&gt;db-&gt;join()</a><a class="headerlink" href="#this-db-join" title="Permalink to this headline">¶</a></h3>
<p>Permits you to write the JOIN portion of your query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;blogs&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">join</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;comments.id = blogs.id&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

<span class="c1">// Produces:</span>
<span class="c1">// SELECT * FROM blogs JOIN comments ON comments.id = blogs.id</span>
</pre></div>
</div>
<p>Multiple function calls can be made if you need several joins in one
query.</p>
<p>If you need a specific type of JOIN you can specify it via the third
parameter of the function. Options are: left, right, outer, inner, left
outer, and right outer.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">join</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;comments.id = blogs.id&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">);</span>
<span class="c1">// Produces: LEFT JOIN comments ON comments.id = blogs.id</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-where">
<h3><a class="toc-backref" href="#id13">$this-&gt;db-&gt;where()</a><a class="headerlink" href="#this-db-where" title="Permalink to this headline">¶</a></h3>
<p>This function enables you to set <strong>WHERE</strong> clauses using one of four
methods:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values passed to this function are escaped automatically,
producing safer queries.</p>
</div>
<ol class="arabic">
<li><p class="first"><strong>Simple key/value method:</strong></p>
<blockquote>
<div><div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span> <span class="c1">// Produces: WHERE name = &#39;Joe&#39;</span>
</pre></div>
</div>
<p>Notice that the equal sign is added for you.</p>
<p>If you use multiple function calls they will be chained together with
AND between them:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="nv">$status</span><span class="p">);</span>
<span class="c1">// WHERE name = &#39;Joe&#39; AND title = &#39;boss&#39; AND status = &#39;active&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><strong>Custom key/value method:</strong></dt>
<dd><p class="first">You can include an operator in the first parameter in order to
control the comparison:</p>
<div class="last highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;name !=&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id &lt;&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span> <span class="c1">// Produces: WHERE name != &#39;Joe&#39; AND id &lt; 45</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p class="first"><strong>Associative array method:</strong></p>
<blockquote>
<div><div class="highlight-ci"><div class="highlight"><pre><span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="nv">$status</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
<span class="c1">// Produces: WHERE name = &#39;Joe&#39; AND title = &#39;boss&#39; AND status = &#39;active&#39;</span>
</pre></div>
</div>
<p>You can include your own operators using this method as well:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name !=&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span> <span class="s1">&#39;id &lt;&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">,</span> <span class="s1">&#39;date &gt;&#39;</span> <span class="o">=&gt;</span> <span class="nv">$date</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><strong>Custom string:</strong></dt>
<dd><p class="first">You can write your own clauses manually:</p>
<div class="last highlight-ci"><div class="highlight"><pre><span class="nv">$where</span> <span class="o">=</span> <span class="s2">&quot;name=&#39;Joe&#39; AND status=&#39;boss&#39; OR status=&#39;active&#39;&quot;</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="nv">$where</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
<p>$this-&gt;db-&gt;where() accepts an optional third parameter. If you set it to
FALSE, CodeIgniter will not try to protect your field or table names
with backticks.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;MATCH (field) AGAINST (&quot;value&quot;)&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-or-where">
<h3><a class="toc-backref" href="#id14">$this-&gt;db-&gt;or_where()</a><a class="headerlink" href="#this-db-or-where" title="Permalink to this headline">¶</a></h3>
<p>This function is identical to the one above, except that multiple
instances are joined by OR:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;name !=&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">or_where</span><span class="p">(</span><span class="s1">&#39;id &gt;&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>  <span class="c1">// Produces: WHERE name != &#39;Joe&#39; OR id &gt; 50</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">or_where() was formerly known as orwhere(), which has been
removed.</p>
</div>
</div>
<div class="section" id="this-db-where-in">
<h3><a class="toc-backref" href="#id15">$this-&gt;db-&gt;where_in()</a><a class="headerlink" href="#this-db-where-in" title="Permalink to this headline">¶</a></h3>
<p>Generates a WHERE field IN (&#8216;item&#8217;, &#8216;item&#8217;) SQL query joined with AND if
appropriate</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$names</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Todd&#39;</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where_in</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nv">$names</span><span class="p">);</span>
<span class="c1">// Produces: WHERE username IN (&#39;Frank&#39;, &#39;Todd&#39;, &#39;James&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-or-where-in">
<h3><a class="toc-backref" href="#id16">$this-&gt;db-&gt;or_where_in()</a><a class="headerlink" href="#this-db-or-where-in" title="Permalink to this headline">¶</a></h3>
<p>Generates a WHERE field IN (&#8216;item&#8217;, &#8216;item&#8217;) SQL query joined with OR if
appropriate</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$names</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Todd&#39;</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">or_where_in</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nv">$names</span><span class="p">);</span>
<span class="c1">// Produces: OR username IN (&#39;Frank&#39;, &#39;Todd&#39;, &#39;James&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-where-not-in">
<h3><a class="toc-backref" href="#id17">$this-&gt;db-&gt;where_not_in()</a><a class="headerlink" href="#this-db-where-not-in" title="Permalink to this headline">¶</a></h3>
<p>Generates a WHERE field NOT IN (&#8216;item&#8217;, &#8216;item&#8217;) SQL query joined with
AND if appropriate</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$names</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Todd&#39;</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where_not_in</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nv">$names</span><span class="p">);</span>
<span class="c1">// Produces: WHERE username NOT IN (&#39;Frank&#39;, &#39;Todd&#39;, &#39;James&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-or-where-not-in">
<h3><a class="toc-backref" href="#id18">$this-&gt;db-&gt;or_where_not_in()</a><a class="headerlink" href="#this-db-or-where-not-in" title="Permalink to this headline">¶</a></h3>
<p>Generates a WHERE field NOT IN (&#8216;item&#8217;, &#8216;item&#8217;) SQL query joined with OR
if appropriate</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$names</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Frank&#39;</span><span class="p">,</span> <span class="s1">&#39;Todd&#39;</span><span class="p">,</span> <span class="s1">&#39;James&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">or_where_not_in</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nv">$names</span><span class="p">);</span>
<span class="c1">// Produces: OR username NOT IN (&#39;Frank&#39;, &#39;Todd&#39;, &#39;James&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-like">
<h3><a class="toc-backref" href="#id19">$this-&gt;db-&gt;like()</a><a class="headerlink" href="#this-db-like" title="Permalink to this headline">¶</a></h3>
<p>This function enables you to generate <strong>LIKE</strong> clauses, useful for doing
searches.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values passed to this function are escaped automatically.</p>
</div>
<ol class="arabic">
<li><p class="first"><strong>Simple key/value method:</strong></p>
<blockquote>
<div><div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>     <span class="c1">// Produces: WHERE title LIKE &#39;%match%&#39;</span>
</pre></div>
</div>
<p>If you use multiple function calls they will be chained together with
AND between them:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>
<span class="c1">// WHERE title LIKE &#39;%match%&#39; AND  body LIKE &#39;%match%</span>
</pre></div>
</div>
<p>If you want to control where the wildcard (%) is placed, you can use
an optional third argument. Your options are &#8216;before&#8217;, &#8216;after&#8217; and
&#8216;both&#8217; (which is the default).</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">);</span>    <span class="c1">// Produces: WHERE title LIKE &#39;%match&#39;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">,</span> <span class="s1">&#39;after&#39;</span><span class="p">);</span>             <span class="c1">// Produces: WHERE title LIKE &#39;match%&#39;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">);</span>              <span class="c1">// Produces: WHERE title LIKE &#39;%match%&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Associative array method:</strong></p>
<blockquote>
<div><div class="highlight-ci"><div class="highlight"><pre><span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$match</span><span class="p">,</span> <span class="s1">&#39;page1&#39;</span> <span class="o">=&gt;</span> <span class="nv">$match</span><span class="p">,</span> <span class="s1">&#39;page2&#39;</span> <span class="o">=&gt;</span> <span class="nv">$match</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
<span class="c1">// WHERE title LIKE &#39;%match%&#39; AND  page1 LIKE &#39;%match%&#39; AND  page2 LIKE &#39;%match%&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="this-db-or-like">
<h3><a class="toc-backref" href="#id20">$this-&gt;db-&gt;or_like()</a><a class="headerlink" href="#this-db-or-like" title="Permalink to this headline">¶</a></h3>
<p>This function is identical to the one above, except that multiple
instances are joined by OR:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">or_like</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="nv">$match</span><span class="p">);</span>
<span class="c1">// WHERE title LIKE &#39;%match%&#39; OR  body LIKE &#39;%match%&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">or_like() was formerly known as orlike(), which has been removed.</p>
</div>
</div>
<div class="section" id="this-db-not-like">
<h3><a class="toc-backref" href="#id21">$this-&gt;db-&gt;not_like()</a><a class="headerlink" href="#this-db-not-like" title="Permalink to this headline">¶</a></h3>
<p>This function is identical to <strong>like()</strong>, except that it generates NOT
LIKE statements:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">not_like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>  <span class="c1">// WHERE title NOT LIKE &#39;%match%</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-or-not-like">
<h3><a class="toc-backref" href="#id22">$this-&gt;db-&gt;or_not_like()</a><a class="headerlink" href="#this-db-or-not-like" title="Permalink to this headline">¶</a></h3>
<p>This function is identical to <strong>not_like()</strong>, except that multiple
instances are joined by OR:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">or_not_like</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>
<span class="c1">// WHERE title  LIKE &#39;%match% OR body NOT LIKE &#39;%match%&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-group-by">
<h3><a class="toc-backref" href="#id23">$this-&gt;db-&gt;group_by()</a><a class="headerlink" href="#this-db-group-by" title="Permalink to this headline">¶</a></h3>
<p>Permits you to write the GROUP BY portion of your query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">group_by</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">);</span> <span class="c1">// Produces: GROUP BY title</span>
</pre></div>
</div>
<p>You can also pass an array of multiple values as well:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">group_by</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">));</span>  <span class="c1">// Produces: GROUP BY title, date</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">group_by() was formerly known as groupby(), which has been
removed.</p>
</div>
</div>
<div class="section" id="this-db-distinct">
<h3><a class="toc-backref" href="#id24">$this-&gt;db-&gt;distinct()</a><a class="headerlink" href="#this-db-distinct" title="Permalink to this headline">¶</a></h3>
<p>Adds the &#8220;DISTINCT&#8221; keyword to a query</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">distinct</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">);</span> <span class="c1">// Produces: SELECT DISTINCT * FROM table</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-having">
<h3><a class="toc-backref" href="#id25">$this-&gt;db-&gt;having()</a><a class="headerlink" href="#this-db-having" title="Permalink to this headline">¶</a></h3>
<p>Permits you to write the HAVING portion of your query. There are 2
possible syntaxes, 1 argument or 2:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">having</span><span class="p">(</span><span class="s1">&#39;user_id = 45&#39;</span><span class="p">);</span>  <span class="c1">// Produces: HAVING user_id = 45</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">having</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span>  <span class="mi">45</span><span class="p">);</span>  <span class="c1">// Produces: HAVING user_id = 45</span>
</pre></div>
</div>
<p>You can also pass an array of multiple values as well:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">having</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title =&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My Title&#39;</span><span class="p">,</span> <span class="s1">&#39;id &lt;&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">));</span>
<span class="c1">// Produces: HAVING title = &#39;My Title&#39;, id &lt; 45</span>
</pre></div>
</div>
<p>If you are using a database that CodeIgniter escapes queries for, you
can prevent escaping content by passing an optional third argument, and
setting it to FALSE.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">having</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span>  <span class="mi">45</span><span class="p">);</span>  <span class="c1">// Produces: HAVING `user_id` = 45 in some databases such as MySQL</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">having</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span>  <span class="mi">45</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>  <span class="c1">// Produces: HAVING user_id = 45</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-or-having">
<h3><a class="toc-backref" href="#id26">$this-&gt;db-&gt;or_having()</a><a class="headerlink" href="#this-db-or-having" title="Permalink to this headline">¶</a></h3>
<p>Identical to having(), only separates multiple clauses with &#8220;OR&#8221;.</p>
</div>
<div class="section" id="this-db-order-by">
<h3><a class="toc-backref" href="#id27">$this-&gt;db-&gt;order_by()</a><a class="headerlink" href="#this-db-order-by" title="Permalink to this headline">¶</a></h3>
<p>Lets you set an ORDER BY clause. The first parameter contains the name
of the column you would like to order by. The second parameter lets you
set the direction of the result. Options are asc or desc, or random.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">order_by</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">);</span>  <span class="c1">// Produces: ORDER BY title DESC</span>
</pre></div>
</div>
<p>You can also pass your own string in the first parameter:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">order_by</span><span class="p">(</span><span class="s1">&#39;title desc, name asc&#39;</span><span class="p">);</span>  <span class="c1">// Produces: ORDER BY title DESC, name ASC</span>
</pre></div>
</div>
<p>Or multiple function calls can be made if you need multiple fields.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">order_by</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">order_by</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;asc&quot;</span><span class="p">);</span> <span class="c1">// Produces: ORDER BY title DESC, name ASC</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">order_by() was formerly known as orderby(), which has been
removed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">random ordering is not currently supported in Oracle or MSSQL
drivers. These will default to &#8216;ASC&#8217;.</p>
</div>
</div>
<div class="section" id="this-db-limit">
<h3><a class="toc-backref" href="#id28">$this-&gt;db-&gt;limit()</a><a class="headerlink" href="#this-db-limit" title="Permalink to this headline">¶</a></h3>
<p>Lets you limit the number of rows you would like returned by the query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// Produces: LIMIT 10</span>
</pre></div>
</div>
<p>The second parameter lets you set a result offset.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>  <span class="c1">// Produces: LIMIT 20, 10 (in MySQL.  Other databases have slightly different syntax)</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-count-all-results">
<h3><a class="toc-backref" href="#id29">$this-&gt;db-&gt;count_all_results()</a><a class="headerlink" href="#this-db-count-all-results" title="Permalink to this headline">¶</a></h3>
<p>Permits you to determine the number of rows in a particular Active
Record query. Queries will accept Active Record restrictors such as
where(), or_where(), like(), or_like(), etc. Example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">count_all_results</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">);</span>  <span class="c1">// Produces an integer, like 25</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">count_all_results</span><span class="p">();</span> <span class="c1">// Produces an integer, like 17</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-count-all">
<h3><a class="toc-backref" href="#id30">$this-&gt;db-&gt;count_all()</a><a class="headerlink" href="#this-db-count-all" title="Permalink to this headline">¶</a></h3>
<p>Permits you to determine the number of rows in a particular table.
Submit the table name in the first parameter. Example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">count_all</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">);</span>  <span class="c1">// Produces an integer, like 25</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="inserting-data">
<h2><a class="toc-backref" href="#id31">Inserting Data</a><a class="headerlink" href="#inserting-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="this-db-insert">
<h3><a class="toc-backref" href="#id32">$this-&gt;db-&gt;insert()</a><a class="headerlink" href="#this-db-insert" title="Permalink to this headline">¶</a></h3>
<p>Generates an insert string based on the data you supply, and runs the
query. You can either pass an <strong>array</strong> or an <strong>object</strong> to the
function. Here is an example using an array:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My title&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My Name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My date&#39;</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="c1">// Produces: INSERT INTO mytable (title, name, date) VALUES (&#39;My title&#39;, &#39;My name&#39;, &#39;My date&#39;)</span>
</pre></div>
</div>
<p>The first parameter will contain the table name, the second is an
associative array of values.</p>
<p>Here is an example using an object:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">class Myclass {</span>
<span class="cm">        var  $title = &#39;My Title&#39;;</span>
<span class="cm">        var  $content = &#39;My Content&#39;;</span>
<span class="cm">        var  $date = &#39;My Date&#39;;</span>
<span class="cm">}</span>
<span class="cm">*/</span>

<span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Myclass</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$object</span><span class="p">);</span>
<span class="c1">// Produces: INSERT INTO mytable (title, content, date) VALUES (&#39;My Title&#39;, &#39;My Content&#39;, &#39;My Date&#39;)</span>
</pre></div>
</div>
<p>The first parameter will contain the table name, the second is an
object.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values are escaped automatically producing safer queries.</p>
</div>
</div>
<div class="section" id="this-db-get-compiled-insert">
<h3><a class="toc-backref" href="#id33">$this-&gt;db-&gt;get_compiled_insert()</a><a class="headerlink" href="#this-db-get-compiled-insert" title="Permalink to this headline">¶</a></h3>
<p>Compiles the insertion query just like <a class="reference internal" href="#this-db-insert">$this-&gt;db-&gt;insert()</a> but does not
<em>run</em> the query. This method simply returns the SQL query as a string.</p>
<p>Example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My title&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;My Name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;date&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;My date&#39;</span>
<span class="p">);</span>

<span class="nv">$sql</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get_compiled_insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$sql</span><span class="p">;</span>

<span class="c1">// Produces string: INSERT INTO mytable (title, name, date) VALUES (&#39;My title&#39;, &#39;My name&#39;, &#39;My date&#39;)</span>
</pre></div>
</div>
<p>The second parameter enables you to set whether or not the active record query
will be reset (by default it will be&#8211;just like <a class="reference internal" href="#this-db-insert">$this-&gt;db-&gt;insert()</a>):</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;My Title&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get_compiled_insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>

<span class="c1">// Produces string: INSERT INTO mytable (title) VALUES (&#39;My Title&#39;)</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;My Content&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get_compiled_insert</span><span class="p">();</span>

<span class="c1">// Produces string: INSERT INTO mytable (title, content) VALUES (&#39;My Title&#39;, &#39;My Content&#39;)</span>
</pre></div>
</div>
<p>The key thing to notice in the above example is that the second query did not
utlize <a class="reference internal" href="#this-db-from">$this-&gt;db-&gt;from()</a> nor did it pass a table name into the first
parameter. The reason this worked is because the query has not been executed
using <a class="reference internal" href="#this-db-insert">$this-&gt;db-&gt;insert()</a> which resets values or reset directly using
<a href="#id53"><span class="problematic" id="id54">`$this-&gt;db-&gt;reset_query()`_</span></a>.</p>
</div>
<div class="section" id="this-db-insert-batch">
<h3><a class="toc-backref" href="#id34">$this-&gt;db-&gt;insert_batch()</a><a class="headerlink" href="#this-db-insert-batch" title="Permalink to this headline">¶</a></h3>
<p>Generates an insert string based on the data you supply, and runs the
query. You can either pass an <strong>array</strong> or an <strong>object</strong> to the
function. Here is an example using an array:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My title&#39;</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My Name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My date&#39;</span>
        <span class="p">),</span>
        <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another title&#39;</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another Name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another date&#39;</span>
        <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert_batch</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="c1">// Produces: INSERT INTO mytable (title, name, date) VALUES (&#39;My title&#39;, &#39;My name&#39;, &#39;My date&#39;),  (&#39;Another title&#39;, &#39;Another name&#39;, &#39;Another date&#39;)</span>
</pre></div>
</div>
<p>The first parameter will contain the table name, the second is an
associative array of values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values are escaped automatically producing safer queries.</p>
</div>
</div>
<div class="section" id="this-db-set">
<h3><a class="toc-backref" href="#id35">$this-&gt;db-&gt;set()</a><a class="headerlink" href="#this-db-set" title="Permalink to this headline">¶</a></h3>
<p>This function enables you to set values for inserts or updates.</p>
<p><strong>It can be used instead of passing a data array directly to the insert
or update functions:</strong></p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>  <span class="c1">// Produces: INSERT INTO mytable (name) VALUES (&#39;{$name}&#39;)</span>
</pre></div>
</div>
<p>If you use multiple function called they will be assembled properly
based on whether you are doing an insert or an update:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nv">$title</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="nv">$status</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>set()</strong> will also accept an optional third parameter ($escape), that
will prevent data from being escaped if set to FALSE. To illustrate the
difference, here is set() used both with and without the escape
parameter.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;field+1&#39;</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span> <span class="c1">// gives INSERT INTO mytable (field) VALUES (field+1)</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;field+1&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span> <span class="c1">// gives INSERT INTO mytable (field) VALUES (&#39;field+1&#39;)</span>
</pre></div>
</div>
<p>You can also pass an associative array to this function:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
        <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="nv">$status</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Or an object:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">class Myclass {</span>
<span class="cm">        var  $title = &#39;My Title&#39;;</span>
<span class="cm">        var  $content = &#39;My Content&#39;;</span>
<span class="cm">        var  $date = &#39;My Date&#39;;</span>
<span class="cm">}</span>
<span class="cm">*/</span>

<span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Myclass</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$object</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="updating-data">
<h2><a class="toc-backref" href="#id36">Updating Data</a><a class="headerlink" href="#updating-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="this-db-update">
<h3><a class="toc-backref" href="#id37">$this-&gt;db-&gt;update()</a><a class="headerlink" href="#this-db-update" title="Permalink to this headline">¶</a></h3>
<p>Generates an update string and runs the query based on the data you
supply. You can pass an <strong>array</strong> or an <strong>object</strong> to the function. Here
is an example using an array:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
        <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="nv">$date</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="c1">// Produces: // UPDATE mytable  // SET title = &#39;{$title}&#39;, name = &#39;{$name}&#39;, date = &#39;{$date}&#39; // WHERE id = $id</span>
</pre></div>
</div>
<p>Or you can supply an object:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">class Myclass {</span>
<span class="cm">        var  $title = &#39;My Title&#39;;</span>
<span class="cm">        var  $content = &#39;My Content&#39;;</span>
<span class="cm">        var  $date = &#39;My Date&#39;;</span>
<span class="cm">}</span>
<span class="cm">*/</span>

<span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Myclass</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$object</span><span class="p">);</span>
<span class="c1">// Produces: // UPDATE mytable  // SET title = &#39;{$title}&#39;, name = &#39;{$name}&#39;, date = &#39;{$date}&#39; // WHERE id = $id</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values are escaped automatically producing safer queries.</p>
</div>
<p>You&#8217;ll notice the use of the $this-&gt;db-&gt;where() function, enabling you
to set the WHERE clause. You can optionally pass this information
directly into the update function as a string:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="s2">&quot;id = 4&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Or as an array:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">));</span>
</pre></div>
</div>
<p>You may also use the $this-&gt;db-&gt;set() function described above when
performing updates.</p>
</div>
<div class="section" id="this-db-update-batch">
<h3><a class="toc-backref" href="#id38">$this-&gt;db-&gt;update_batch()</a><a class="headerlink" href="#this-db-update-batch" title="Permalink to this headline">¶</a></h3>
<p>Generates an update string based on the data you supply, and runs the query.
You can either pass an <strong>array</strong> or an <strong>object</strong> to the function.
Here is an example using an array:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
   <span class="k">array</span><span class="p">(</span>
      <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My title&#39;</span> <span class="p">,</span>
      <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My Name 2&#39;</span> <span class="p">,</span>
      <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My date 2&#39;</span>
   <span class="p">),</span>
   <span class="k">array</span><span class="p">(</span>
      <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another title&#39;</span> <span class="p">,</span>
      <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another Name 2&#39;</span> <span class="p">,</span>
      <span class="s1">&#39;date&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Another date 2&#39;</span>
   <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">update_batch</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">);</span>

<span class="c1">// Produces:</span>
<span class="c1">// UPDATE `mytable` SET `name` = CASE</span>
<span class="c1">// WHEN `title` = &#39;My title&#39; THEN &#39;My Name 2&#39;</span>
<span class="c1">// WHEN `title` = &#39;Another title&#39; THEN &#39;Another Name 2&#39;</span>
<span class="c1">// ELSE `name` END,</span>
<span class="c1">// `date` = CASE</span>
<span class="c1">// WHEN `title` = &#39;My title&#39; THEN &#39;My date 2&#39;</span>
<span class="c1">// WHEN `title` = &#39;Another title&#39; THEN &#39;Another date 2&#39;</span>
<span class="c1">// ELSE `date` END</span>
<span class="c1">// WHERE `title` IN (&#39;My title&#39;,&#39;Another title&#39;)</span>
</pre></div>
</div>
<p>The first parameter will contain the table name, the second is an associative
array of values, the third parameter is the where key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All values are escaped automatically producing safer queries.</p>
</div>
</div>
<div class="section" id="this-db-get-compiled-update">
<h3><a class="toc-backref" href="#id39">$this-&gt;db-&gt;get_compiled_update()</a><a class="headerlink" href="#this-db-get-compiled-update" title="Permalink to this headline">¶</a></h3>
<p>This works exactly the same way as <tt class="docutils literal"><span class="pre">$this-&gt;db-&gt;get_compiled_insert()</span></tt> except
that it produces an UPDATE SQL string instead of an INSERT SQL string.</p>
<p>For more information view documentation for <a href="#id55"><span class="problematic" id="id56">`$this-&gt;get_compiled_insert()`_</span></a>.</p>
</div>
</div>
<div class="section" id="deleting-data">
<h2><a class="toc-backref" href="#id40">Deleting Data</a><a class="headerlink" href="#deleting-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="this-db-delete">
<h3><a class="toc-backref" href="#id41">$this-&gt;db-&gt;delete()</a><a class="headerlink" href="#this-db-delete" title="Permalink to this headline">¶</a></h3>
<p>Generates a delete SQL string and runs the query.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">));</span>  <span class="c1">// Produces: // DELETE FROM mytable  // WHERE id = $id</span>
</pre></div>
</div>
<p>The first parameter is the table name, the second is the where clause.
You can also use the where() or or_where() functions instead of passing
the data to the second parameter of the function:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>

<span class="c1">// Produces:</span>
<span class="c1">// DELETE FROM mytable</span>
<span class="c1">// WHERE id = $id</span>
</pre></div>
</div>
<p>An array of table names can be passed into delete() if you would like to
delete data from more than 1 table.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$tables</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;table1&#39;</span><span class="p">,</span> <span class="s1">&#39;table2&#39;</span><span class="p">,</span> <span class="s1">&#39;table3&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$tables</span><span class="p">);</span>
</pre></div>
</div>
<p>If you want to delete all data from a table, you can use the truncate()
function, or empty_table().</p>
</div>
<div class="section" id="this-db-empty-table">
<h3><a class="toc-backref" href="#id42">$this-&gt;db-&gt;empty_table()</a><a class="headerlink" href="#this-db-empty-table" title="Permalink to this headline">¶</a></h3>
<p>Generates a delete SQL string and runs the
query.:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">empty_table</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span> <span class="c1">// Produces: DELETE FROM mytable</span>
</pre></div>
</div>
</div>
<div class="section" id="this-db-truncate">
<h3><a class="toc-backref" href="#id43">$this-&gt;db-&gt;truncate()</a><a class="headerlink" href="#this-db-truncate" title="Permalink to this headline">¶</a></h3>
<p>Generates a truncate SQL string and runs the query.</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">truncate</span><span class="p">();</span>

<span class="c1">// or</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">truncate</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>

<span class="c1">// Produce:</span>
<span class="c1">// TRUNCATE mytable</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the TRUNCATE command isn&#8217;t available, truncate() will
execute as &#8220;DELETE FROM table&#8221;.</p>
</div>
</div>
<div class="section" id="this-db-get-compiled-delete">
<h3><a class="toc-backref" href="#id44">$this-&gt;db-&gt;get_compiled_delete()</a><a class="headerlink" href="#this-db-get-compiled-delete" title="Permalink to this headline">¶</a></h3>
<p>This works exactly the same way as <tt class="docutils literal"><span class="pre">$this-&gt;db-&gt;get_compiled_insert()</span></tt> except
that it produces a DELETE SQL string instead of an INSERT SQL string.</p>
<p>For more information view documentation for <a href="#id57"><span class="problematic" id="id58">`$this-&gt;get_compiled_insert()`_</span></a>.</p>
</div>
</div>
<div class="section" id="method-chaining">
<h2><a class="toc-backref" href="#id45">Method Chaining</a><a class="headerlink" href="#method-chaining" title="Permalink to this headline">¶</a></h2>
<p>Method chaining allows you to simplify your syntax by connecting
multiple functions. Consider this example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="active-record-caching">
<span id="ar-caching"></span><h2><a class="toc-backref" href="#id46">Active Record Caching</a><a class="headerlink" href="#active-record-caching" title="Permalink to this headline">¶</a></h2>
<p>While not &#8220;true&#8221; caching, Active Record enables you to save (or &#8220;cache&#8221;)
certain parts of your queries for reuse at a later point in your
script&#8217;s execution. Normally, when an Active Record call is completed,
all stored information is reset for the next call. With caching, you can
prevent this reset, and reuse information easily.</p>
<p>Cached calls are cumulative. If you make 2 cached select() calls, and
then 2 uncached select() calls, this will result in 4 select() calls.
There are three Caching functions available:</p>
<div class="section" id="this-db-start-cache">
<h3><a class="toc-backref" href="#id47">$this-&gt;db-&gt;start_cache()</a><a class="headerlink" href="#this-db-start-cache" title="Permalink to this headline">¶</a></h3>
<p>This function must be called to begin caching. All Active Record queries
of the correct type (see below for supported queries) are stored for
later use.</p>
</div>
<div class="section" id="this-db-stop-cache">
<h3><a class="toc-backref" href="#id48">$this-&gt;db-&gt;stop_cache()</a><a class="headerlink" href="#this-db-stop-cache" title="Permalink to this headline">¶</a></h3>
<p>This function can be called to stop caching.</p>
</div>
<div class="section" id="this-db-flush-cache">
<h3><a class="toc-backref" href="#id49">$this-&gt;db-&gt;flush_cache()</a><a class="headerlink" href="#this-db-flush-cache" title="Permalink to this headline">¶</a></h3>
<p>This function deletes all items from the Active Record cache.</p>
<p>Here&#8217;s a usage example:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">start_cache</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;field1&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">stop_cache</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">);</span>
<span class="c1">//Generates: SELECT `field1` FROM (`tablename`)</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;field2&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">);</span>
<span class="c1">//Generates:  SELECT `field1`, `field2` FROM (`tablename`)</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">flush_cache</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;field2&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;tablename&#39;</span><span class="p">);</span>
<span class="c1">//Generates:  SELECT `field2` FROM (`tablename`)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following statements can be cached: select, from, join,
where, like, group_by, having, order_by, set</p>
</div>
</div>
</div>
<div class="section" id="reset-active-record">
<h2><a class="toc-backref" href="#id50">Reset Active Record</a><a class="headerlink" href="#reset-active-record" title="Permalink to this headline">¶</a></h2>
<p>Resetting Active Record allows you to start fresh with your query without
executing it first using a method like $this-&gt;db-&gt;get() or $this-&gt;db-&gt;insert().
Just like the methods that execute a query, this will <em>not</em> reset items you&#8217;ve
cached using <a class="reference internal" href="#active-record-caching">Active Record Caching</a>.</p>
<p>This is useful in situations where you are using Active Record to generate SQL
(ex. <tt class="docutils literal"><span class="pre">$this-&gt;db-&gt;get_compiled_select()</span></tt>) but then choose to, for instance,
run the query:</p>
<div class="highlight-ci"><div class="highlight"><pre><span class="c1">// Note that the second parameter of the get_compiled_select method is FALSE</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;field1&#39;</span><span class="p">,</span><span class="s1">&#39;field2&#39;</span><span class="p">))</span>
                                <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;field3&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
                                <span class="o">-&gt;</span><span class="na">get_compiled_select</span><span class="p">(</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>

<span class="c1">// ...</span>
<span class="c1">// Do something crazy with the SQL code... like add it to a cron script for</span>
<span class="c1">// later execution or something...</span>
<span class="c1">// ...</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">db</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">result_array</span><span class="p">();</span>

<span class="c1">// Would execute and return an array of results of the following query:</span>
<span class="c1">// SELECT field1, field1 from mytable where field3 = 5;</span>
</pre></div>
</div>
</div>
</div>

		</div>

		<!-- {user_guide_comments} -->
					
		<div id="footer">
			<p class="top">
				
				<span class="prev">Previous Topic: <a href="helpers.html">Query Helper Functions</a></span>
				
				
				<span class="next">Next Topic: <a href="transactions.html">Transactions</a></span>
				
				<a href="#header" title="Return to top">Return to top</a>
			</p>
			<p><a href="">CodeIgniter</a> &ndash; Copyright &copy; 2011, EllisLab, Inc.</a> &ndash; Last updated: Nov 16, 2011</p>
		</div><!-- /#footer -->
	
	<script src="../_static/asset/js/jquery-ui-min.js" type="text/javascript" charset="utf-8" async></script>
	<script type="text/javascript" charset="utf-8">
		$('#toc-link').click(function(){
			$('#table-contents').animate({ left: '0' },1000);
			return false;
		});
		$('html').click(function(){
			if ($('#table-contents').css("left") == '0px'){
				$('#table-contents').animate({ left: '-520' },1000);
			}
		});
		$('#table-contents').click(function(event){
			event.stopPropagation();
		});
/*		$('*:not(#table-contents,#toc-link)').click(function(){
			if ($('#table-contents').css("left") == '0px'){
				$('#table-contents').animate({ left: '-520' },1000);
			}
		});
/*		$("#toc-link").click(function () {
			$('#table-contents').show("slide", { direction: "left" }, 100);
			event.stopPropagation();
			return false;
		});
		$('*:not(#table-contents,#toc-link)').click(function () {
			if ($('#table-contents').is(":visible")) {
				$('#table-contents').hide("slide", { direction: "left" }, 100);
				event.stopPropagation();	
			}
		}); */
	</script>
	</body>
</html>